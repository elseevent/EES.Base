(function(n){"use strict";n.namespace("E$.helpers.loaders",function(t){t.$GetPath=function(t,i){var r=new RegExp("(?:(?:\\.min)?\\."+i+")$"),u=S$.sp.replace.call(t,r,"");return u+(n.isDebugging?"."+i:".min."+i)};var i=t.simpleXHR=function(n){var t=new XMLHttpRequest;return t.onreadystatechange=function(){if(t.readyState===4&&t.status===200&&n.onLoad)n.onLoad(t,t.response)},t.open(n.method,n.url,n.async),t.send(null),t.response};n(t).extra({img:function(n,t){var i=new Image;return i.onload=t,i.src=n,i},css:function(n,i){var r=document.createElement("link");return r.rel="stylesheet",r.onload=i,r.href=t.$GetPath(n,"css"),document.head.appendChild(r),r},js:function(n,i){var r=document.createElement("script");return r.onload=i,r.src=t.$GetPath(n,"js"),document.body.appendChild(r),r},xml:function(r,u){return i({url:t.$GetPath(r,"xml"),async:!1,method:"GET",onLoad:function(t,i){n.isFunction(u)&&u.call(t,i)}})},json:function(r,u){return i({url:t.$GetPath(r,"json"),async:!1,method:"GET",onLoad:function(t,i){n.isFunction(u)&&u.call(t,i)}})}})});n.sWrapper.extends({toResource:function(t){var i=this.pushStack(this);return i.extends(function(i){return{load:function(r){if(n.isFunction(i)){var u=new n.components.collections.Queue(this.toArray()),f=function(t){i(t,function(){n.isFunction(r)&&r.call(this);u.count()!==0&&f(u.dequeue())})};f(u.dequeue())}else n.log("no {0} type loader.",t)}}}(n.helpers.loaders[(t||"").toLowerCase()])),i}});n.extends({resource:function(t,i){return{load:function(r){var u=0,f=[];n(i).map(function(t){var i=[];return n.each(t,function(t,r){var f=n(r).toResource(t);u+=f.length;i.push(f)}),i}).execute(function(i){i.load(function(){f.push(this);u-=1;0===u&&(n.log("Resource [{0}] all ok",t),n.isFunction(r)&&r(f))})})}}}})})(EES);