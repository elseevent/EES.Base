(function(n,t){t.namespace("E$.helpers.tmpl",function(i){t(i).extra({safeRemove:function(t,i){this.removeImagesUnder(t);setTimeout(function(){n(t).remove();i&&i()},10)},safeEmpty:function(t,i){this.removeImagesUnder(t);setTimeout(function(){n(t).empty();i&&setTimeout(i,10)},10)},removeImagesUnder:function(t){n("img",t).each(function(){this.src=""})},whenLoaded:function(t,i){n(t).load(function(){var n=this;return setTimeout(function(){i&&i(n)},10),!1}).each(function(){this.complete&&this.naturalWidth!=0&&n(this).trigger("load")})},whenFuckingLoaded:function(t,i){n(t).load(function(){var n=this;return setTimeout(function(){i&&i(n)},10),!1}).each(function(){this.complete&&n(this).trigger("load")})},procTmpl:function(t,i,r,u){var f=n.tmpl(t,i,r),e;if(f.length>0){u&&u(f);return}e=setInterval(function(){var f=n.tmpl(t,i,r);f.length>0&&(clearInterval(e),u&&u(f))},100)},procTmpl_:function(n){return this.procTmpl(n.tmpl,n.data,n.options,n.callback)},whenAllImagesLoaded:function(t,i){for(var r=n(t).find("img"),f=r.length,u=0;u<r.length;u++)this.whenLoaded(n(r[u]),function(){f--;f==0&&i&&setTimeout(i,10)})}})})})(jQuery,EES);